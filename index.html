<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shine Store ‚Äî Top Up & APK Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Exo+2:wght@300;400;700;900&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#050810; --surface:#0d1120; --surface2:#111827;
  --neon-blue:#00d4ff; --neon-cyan:#0ff0fc; --neon-gold:#ffd700;
  --neon-purple:#bf5af2; --neon-green:#00ff88; --neon-red:#ff4466;
  --text:#e8edf5; --text-dim:#6b7a99;
  --border:rgba(0,212,255,0.15);
  --glow-blue:0 0 20px rgba(0,212,255,0.4);
  --glow-gold:0 0 20px rgba(255,215,0,0.4);
}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);color:var(--text);font-family:'Exo 2',sans-serif;min-height:100vh;overflow-x:hidden;}
body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(0,212,255,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,212,255,0.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0;}

/* HEADER */
header{position:relative;z-index:10;padding:16px 24px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border);background:rgba(5,8,16,0.9);backdrop-filter:blur(12px);}
.logo{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:1.6rem;letter-spacing:3px;color:var(--neon-blue);text-shadow:var(--glow-blue);}
.logo span{color:var(--neon-gold);}
.btn-admin{background:transparent;border:1px solid var(--border);color:var(--text-dim);padding:6px 14px;border-radius:4px;cursor:pointer;font-size:0.72rem;letter-spacing:1px;font-family:'Exo 2',sans-serif;transition:all 0.2s;}
.btn-admin:hover{border-color:var(--neon-gold);color:var(--neon-gold);}

/* MAIN NAV */
.main-nav{display:flex;background:var(--surface);border-bottom:1px solid var(--border);position:relative;z-index:9;}
.nav-btn{flex:1;background:transparent;border:none;border-bottom:3px solid transparent;color:var(--text-dim);padding:15px 20px;cursor:pointer;font-family:'Rajdhani',sans-serif;font-size:1rem;font-weight:600;letter-spacing:2px;text-transform:uppercase;transition:all 0.2s;}
.nav-btn:hover{color:var(--text);background:rgba(255,255,255,0.02);}
.nav-btn.active-bbc{color:var(--neon-blue);border-bottom:3px solid var(--neon-blue);background:rgba(0,212,255,0.05);}
.nav-btn.active-apk{color:var(--neon-purple);border-bottom:3px solid var(--neon-purple);background:rgba(191,90,242,0.05);}

/* PAGES */
.page{display:none;}.page.active{display:block;}

/* HERO */
.hero{position:relative;z-index:1;text-align:center;padding:50px 20px 36px;}
.hero-tag{display:inline-block;font-size:0.72rem;letter-spacing:4px;color:var(--neon-cyan);text-transform:uppercase;margin-bottom:14px;opacity:0.8;}
.hero h1{font-family:'Rajdhani',sans-serif;font-size:clamp(2rem,6vw,3.6rem);font-weight:700;line-height:1.1;margin-bottom:10px;background:linear-gradient(135deg,#fff 30%,var(--neon-blue) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.hero p{color:var(--text-dim);font-size:0.95rem;max-width:460px;margin:0 auto;line-height:1.6;}

/* CONTAINER & CARD */
.container{position:relative;z-index:2;max-width:700px;margin:0 auto;padding:0 20px 50px;}
.card{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:28px;position:relative;overflow:hidden;margin-bottom:20px;}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--neon-blue),transparent);}
.card.purple::before{background:linear-gradient(90deg,transparent,var(--neon-purple),transparent);}
.card.green::before{background:linear-gradient(90deg,transparent,var(--neon-green),transparent);}

/* STEP LABEL */
.step-label{font-size:0.7rem;letter-spacing:3px;color:var(--neon-blue);text-transform:uppercase;margin-bottom:18px;display:flex;align-items:center;gap:8px;}
.step-label::after{content:'';flex:1;height:1px;background:var(--border);}
.step-label.purple{color:var(--neon-purple);}
.step-label.green{color:var(--neon-green);justify-content:center;}
.step-label.green::after{display:none;}

/* PACKAGES */
.packages-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px;margin-bottom:20px;}
.pkg{background:var(--surface2);border:1px solid var(--border);border-radius:6px;padding:14px 10px;text-align:center;cursor:pointer;transition:all 0.2s;position:relative;}
.pkg:hover{border-color:var(--neon-blue);box-shadow:var(--glow-blue);transform:translateY(-2px);}
.pkg.selected{border-color:var(--neon-gold);background:rgba(255,215,0,0.06);box-shadow:var(--glow-gold);}
.pkg.selected::after{content:'‚úì';position:absolute;top:6px;right:8px;font-size:0.7rem;color:var(--neon-gold);}
.pkg.popular::before{content:'POPULER';position:absolute;top:-10px;left:50%;transform:translateX(-50%);background:var(--neon-blue);color:#000;font-size:0.55rem;font-weight:700;letter-spacing:1.5px;padding:2px 8px;border-radius:2px;}
.pkg.sold-out{opacity:0.4;cursor:not-allowed;pointer-events:none;}
.pkg.sold-out::after{content:'SOLD OUT';position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(5,8,16,0.65);color:var(--neon-red);font-family:'Rajdhani',sans-serif;font-size:0.7rem;font-weight:700;letter-spacing:2px;border-radius:6px;}
.pkg.admin-mode{cursor:pointer!important;pointer-events:all!important;}
.pkg-num{font-family:'Rajdhani',sans-serif;font-size:1.3rem;font-weight:700;}
.pkg-label{font-size:0.65rem;color:var(--neon-cyan);letter-spacing:1px;text-transform:uppercase;margin:2px 0 6px;}
.pkg-label.purple{color:var(--neon-purple);}
.pkg-price{font-size:0.78rem;color:var(--text-dim);}

/* FORM */
.form-group{margin-bottom:18px;}
label{display:block;font-size:0.72rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--text-dim);margin-bottom:7px;}
input[type=number],input[type=tel],input[type=text],input[type=password]{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:4px;padding:12px 14px;color:var(--text);font-family:'Exo 2',sans-serif;font-size:0.92rem;outline:none;transition:border-color 0.2s;}
input:focus{border-color:var(--neon-blue);}

.divider{height:1px;background:var(--border);margin:22px 0;}

/* SUMMARY */
.summary{background:var(--surface2);border:1px solid var(--border);border-radius:6px;padding:16px;margin-bottom:20px;display:none;}
.summary.show{display:block;}
.summary-row{display:flex;justify-content:space-between;font-size:0.86rem;margin-bottom:7px;color:var(--text-dim);}
.summary-row:last-child{margin-bottom:0;}
.summary-row .val{color:var(--text);font-weight:600;}
.summary-row.total{border-top:1px solid var(--border);padding-top:10px;margin-top:8px;font-size:0.95rem;}
.summary-row.total .val{color:var(--neon-gold);font-family:'Rajdhani',sans-serif;font-size:1.1rem;}

/* BUTTONS */
.btn-order{width:100%;padding:15px;background:linear-gradient(135deg,#00b8d9,#00d4ff);color:#050810;font-family:'Rajdhani',sans-serif;font-size:1.05rem;font-weight:700;letter-spacing:3px;text-transform:uppercase;border:none;border-radius:6px;cursor:pointer;transition:all 0.2s;}
.btn-order:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,212,255,0.4);}
.btn-order.purple{background:linear-gradient(135deg,#9b59b6,var(--neon-purple));color:#fff;}
.btn-order.purple:hover{box-shadow:0 8px 30px rgba(191,90,242,0.4);}

/* APK TABS */
.apk-tabs{display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap;}
.apk-tab{background:var(--surface2);border:1px solid rgba(191,90,242,0.3);border-radius:4px;padding:8px 16px;color:var(--text-dim);font-family:'Exo 2',sans-serif;font-size:0.82rem;letter-spacing:1px;cursor:pointer;transition:all 0.2s;}
.apk-tab:hover,.apk-tab.active{border-color:var(--neon-purple);color:var(--neon-purple);box-shadow:0 0 10px rgba(191,90,242,0.25);}

/* TRUST */
.trust{display:flex;justify-content:center;gap:24px;flex-wrap:wrap;padding-top:24px;border-top:1px solid var(--border);margin-top:8px;}
.trust-item{display:flex;align-items:center;gap:8px;font-size:0.78rem;color:var(--text-dim);}
.trust-icon{width:28px;height:28px;border-radius:50%;background:rgba(0,212,255,0.08);border:1px solid rgba(0,212,255,0.2);display:flex;align-items:center;justify-content:center;font-size:0.85rem;}

/* CS */
.cs-btn{display:inline-flex;align-items:center;gap:14px;padding:15px 30px;background:linear-gradient(135deg,#25d366,#128c7e);color:#fff;text-decoration:none;border-radius:8px;transition:all 0.2s;box-shadow:0 4px 20px rgba(37,211,102,0.3);}
.cs-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(37,211,102,0.45);}

/* ADMIN BAR */
.admin-bar{position:fixed;bottom:0;left:0;right:0;background:rgba(13,17,32,0.97);border-top:2px solid var(--neon-gold);padding:10px 20px;display:flex;align-items:center;justify-content:space-between;z-index:500;}
.admin-bar-info{font-size:0.78rem;color:var(--neon-gold);letter-spacing:1px;font-family:'Rajdhani',sans-serif;}
.admin-bar-btns{display:flex;gap:10px;}
.btn-exit-admin{padding:7px 16px;background:transparent;border:1px solid var(--neon-red);color:var(--neon-red);border-radius:4px;cursor:pointer;font-family:'Rajdhani',sans-serif;font-size:0.82rem;letter-spacing:1px;}
.btn-manage-apk{padding:7px 16px;background:var(--neon-gold);border:none;color:#000;border-radius:4px;cursor:pointer;font-family:'Rajdhani',sans-serif;font-size:0.82rem;font-weight:700;letter-spacing:1px;}

/* MODAL */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.78);z-index:800;align-items:center;justify-content:center;}
.modal-overlay.open{display:flex;}
.modal-box{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:28px;width:min(360px,92vw);position:relative;max-height:88vh;overflow-y:auto;}
.modal-box::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--neon-gold),transparent);}
.modal-box.wide{width:min(680px,95vw);}
.modal-title{font-family:'Rajdhani',sans-serif;font-size:1.4rem;color:var(--neon-gold);letter-spacing:3px;margin-bottom:4px;text-align:center;}
.modal-sub{font-size:0.78rem;color:var(--text-dim);margin-bottom:22px;text-align:center;}
.modal-err{color:var(--neon-red);font-size:0.78rem;margin-bottom:10px;text-align:center;display:none;}
.modal-actions{display:flex;gap:10px;margin-top:14px;}
.btn-cancel{flex:1;padding:10px;background:transparent;border:1px solid var(--border);color:var(--text-dim);border-radius:4px;cursor:pointer;font-family:'Rajdhani',sans-serif;letter-spacing:1px;}
.btn-confirm{flex:1;padding:10px;background:var(--neon-gold);border:none;color:#000;border-radius:4px;cursor:pointer;font-family:'Rajdhani',sans-serif;font-weight:700;letter-spacing:1px;}

/* APK MANAGE */
.apk-manage-item{background:var(--surface2);border:1px solid var(--border);border-radius:6px;padding:14px;margin-bottom:10px;text-align:left;}
.apk-manage-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;}
.apk-manage-name{display:flex;align-items:center;gap:8px;}
.apk-manage-actions{display:flex;gap:6px;}
.min-input{background:var(--bg);border:1px solid var(--border);border-radius:3px;padding:5px 8px;color:var(--text);font-family:'Exo 2',sans-serif;font-size:0.85rem;outline:none;}
.plan-row{display:grid;grid-template-columns:1fr 1fr auto;gap:6px;align-items:center;margin-bottom:6px;}
.btn-sm-g{padding:5px 10px;background:rgba(0,255,136,0.1);color:var(--neon-green);border:1px solid rgba(0,255,136,0.3);border-radius:3px;cursor:pointer;font-family:'Rajdhani',sans-serif;font-size:0.75rem;}
.btn-sm-r{padding:5px 10px;background:rgba(255,68,102,0.1);color:var(--neon-red);border:1px solid rgba(255,68,102,0.3);border-radius:3px;cursor:pointer;font-family:'Rajdhani',sans-serif;font-size:0.75rem;}

/* TOAST */
.toast{position:fixed;bottom:70px;right:20px;background:var(--neon-green);color:#000;font-family:'Rajdhani',sans-serif;font-weight:700;letter-spacing:1.5px;padding:10px 20px;border-radius:6px;z-index:2000;transform:translateY(80px);opacity:0;transition:all 0.3s;pointer-events:none;}
.toast.show{transform:translateY(0);opacity:1;}

/* SCANLINE */
.scanline{position:fixed;top:0;left:0;width:100%;height:2px;background:linear-gradient(90deg,transparent,rgba(0,212,255,0.3),transparent);animation:scan 6s linear infinite;pointer-events:none;z-index:9999;}
@keyframes scan{0%{top:0}100%{top:100%}}

footer{position:relative;z-index:2;text-align:center;padding:18px;border-top:1px solid var(--border);color:var(--text-dim);font-size:0.72rem;letter-spacing:1px;}

@media(max-width:480px){
  header{padding:12px 16px;}.logo{font-size:1.3rem;}
  .card{padding:18px 14px;}.hero{padding:36px 16px 28px;}
  .packages-grid{grid-template-columns:repeat(3,1fr);}
  .nav-btn{font-size:0.85rem;padding:13px 8px;letter-spacing:1px;}
}
</style>
</head>
<body>

<div class="scanline"></div>

<!-- MODAL LOGIN -->
<div class="modal-overlay" id="modalLogin">
  <div class="modal-box">
    <div class="modal-title">üîß ADMIN</div>
    <div class="modal-sub">Masukkan password untuk masuk</div>
    <div class="modal-err" id="loginErr">Password salah!</div>
    <input type="password" id="passInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="20" onkeydown="if(event.key==='Enter')doLogin()">
    <div class="modal-actions">
      <button class="btn-cancel" onclick="closeModal('modalLogin')">BATAL</button>
      <button class="btn-confirm" onclick="doLogin()">MASUK</button>
    </div>
  </div>
</div>

<!-- MODAL KELOLA APK -->
<div class="modal-overlay" id="modalApk">
  <div class="modal-box wide">
    <div class="modal-title">üì± KELOLA APK</div>
    <div class="modal-sub">Tambah, edit, hapus aplikasi & paket harga</div>
    <div style="display:grid;grid-template-columns:1fr 70px auto;gap:8px;margin-bottom:18px;align-items:end;">
      <div><label>Nama Aplikasi</label><input type="text" id="newAppName" placeholder="Contoh: Netflix"></div>
      <div><label>Emoji</label><input type="text" id="newAppEmoji" placeholder="üé¨" maxlength="4" style="text-align:center;font-size:1.1rem;"></div>
      <button class="btn-confirm" style="padding:12px 14px;margin-top:22px;" onclick="adminAddApp()">+ TAMBAH</button>
    </div>
    <div id="apkManageList"></div>
    <button class="btn-cancel" style="width:100%;margin-top:8px;" onclick="closeModal('modalApk')">‚úï TUTUP</button>
  </div>
</div>

<!-- ADMIN BAR -->
<div class="admin-bar" id="adminBar" style="display:none;">
  <div class="admin-bar-info">üîß ADMIN ‚Äî Klik paket untuk Sold Out</div>
  <div class="admin-bar-btns">
    <button class="btn-manage-apk" onclick="openManageApk()">üì± KELOLA APK</button>
    <button class="btn-exit-admin" onclick="exitAdmin()">KELUAR</button>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- HEADER -->
<header>
  <div class="logo">SHINE<span>STORE</span></div>
  <button class="btn-admin" onclick="openModal('modalLogin')">üîß ADMIN</button>
</header>

<!-- MAIN NAV -->
<nav class="main-nav">
  <button class="nav-btn active-bbc" id="navBbc" onclick="switchPage('bbc')">üíé Top Up BBC</button>
  <button class="nav-btn" id="navApk" onclick="switchPage('apk')">üì± APK Premium</button>
</nav>

<!-- PAGE BBC -->
<div class="page active" id="pageBbc">
  <div class="hero">
    <div class="hero-tag">// Mobile Legends: Bang Bang</div>
    <h1>Top Up BBC<br>Cepat & Aman</h1>
    <p>Proses manual via WhatsApp. BBC masuk dalam hitungan menit.</p>
  </div>
  <div class="container">
    <div class="card">
      <div class="step-label">01 ‚Äî Pilih Paket BBC</div>
      <div class="packages-grid" id="bbcGrid"></div>
      <div class="divider"></div>
      <div class="step-label">02 ‚Äî Data Akun</div>
      <div class="form-group"><label>User ID Mobile Legends</label><input type="number" id="userId" placeholder="Contoh: 123456789" oninput="updateBbcSummary()"></div>
      <div class="form-group"><label>Zone ID (Server)</label><input type="number" id="zoneId" placeholder="Contoh: 1234" oninput="updateBbcSummary()"></div>
      <div class="form-group"><label>Nomor WhatsApp Kamu</label><input type="tel" id="waNumBbc" placeholder="Contoh: 08xxxxxxxxxx" oninput="updateBbcSummary()"></div>
      <div class="divider"></div>
      <div class="step-label">03 ‚Äî Konfirmasi Order</div>
      <div class="summary" id="bbcSummary">
        <div class="summary-row"><span>Paket</span><span class="val" id="sPackage">‚Äî</span></div>
        <div class="summary-row"><span>User ID</span><span class="val" id="sUid">‚Äî</span></div>
        <div class="summary-row"><span>Zone ID</span><span class="val" id="sZone">‚Äî</span></div>
        <div class="summary-row total"><span>Total Bayar</span><span class="val" id="sPrice">‚Äî</span></div>
      </div>
      <button class="btn-order" onclick="sendBbcOrder()">üí¨ ORDER VIA WHATSAPP</button>
      <div class="trust">
        <div class="trust-item"><div class="trust-icon">‚ö°</div>Proses Cepat</div>
        <div class="trust-item"><div class="trust-icon">üîí</div>Aman & Terpercaya</div>
        <div class="trust-item"><div class="trust-icon">üïê</div>24 Jam Online</div>
      </div>
    </div>
    <div class="card green">
      <div class="step-label green">üí¨ Customer Service</div>
      <p style="color:var(--text-dim);font-size:0.86rem;margin-bottom:20px;line-height:1.7;text-align:center;">Ada pertanyaan? Tim kami siap membantu via WhatsApp.</p>
      <div style="text-align:center;">
        <a href="https://wa.me/62895619811574?text=Halo%20Shine%20Store!%20Saya%20butuh%20bantuan%20%F0%9F%98%8A" target="_blank" class="cs-btn">
          <span style="font-size:1.2rem;">üí¨</span>
          <div><div style="font-family:'Rajdhani',sans-serif;font-size:0.95rem;font-weight:700;letter-spacing:2px;">CHAT WHATSAPP</div><div style="font-size:0.7rem;opacity:0.8;">Respon cepat ‚Ä¢ 24 Jam</div></div>
        </a>
      </div>
    </div>
  </div>
</div>

<!-- PAGE APK -->
<div class="page" id="pageApk">
  <div class="hero">
    <div class="hero-tag">// Aplikasi Premium</div>
    <h1>APK Premium<br>Harga Terjangkau</h1>
    <p>Aktifasi cepat via WhatsApp. Garansi & terpercaya.</p>
  </div>
  <div class="container">
    <div class="card purple">
      <div class="step-label purple">01 ‚Äî Pilih Aplikasi & Paket</div>
      <div class="apk-tabs" id="apkTabs"></div>
      <div class="packages-grid" id="apkGrid"></div>
      <div class="summary" id="apkSummary">
        <div class="summary-row"><span>Aplikasi</span><span class="val" id="sApkName">‚Äî</span></div>
        <div class="summary-row"><span>Durasi</span><span class="val" id="sApkDur">‚Äî</span></div>
        <div class="summary-row total"><span>Total Bayar</span><span class="val" id="sApkPrice">‚Äî</span></div>
      </div>
      <div class="divider"></div>
      <div class="step-label purple">02 ‚Äî Data Order</div>
      <div class="form-group"><label>Nomor WhatsApp Kamu</label><input type="tel" id="waNumApk" placeholder="Contoh: 08xxxxxxxxxx"></div>
      <button class="btn-order purple" id="btnApkOrder" style="display:none;" onclick="sendApkOrder()">üí¨ ORDER APK VIA WHATSAPP</button>
      <div class="trust">
        <div class="trust-item"><div class="trust-icon">‚ö°</div>Proses Cepat</div>
        <div class="trust-item"><div class="trust-icon">üîí</div>Aman & Terpercaya</div>
        <div class="trust-item"><div class="trust-icon">üïê</div>24 Jam Online</div>
      </div>
    </div>
    <div class="card green">
      <div class="step-label green">üí¨ Customer Service</div>
      <p style="color:var(--text-dim);font-size:0.86rem;margin-bottom:20px;line-height:1.7;text-align:center;">Ada pertanyaan? Tim kami siap membantu via WhatsApp.</p>
      <div style="text-align:center;">
        <a href="https://wa.me/62895619811574?text=Halo%20Shine%20Store!%20Saya%20butuh%20bantuan%20%F0%9F%98%8A" target="_blank" class="cs-btn">
          <span style="font-size:1.2rem;">üí¨</span>
          <div><div style="font-family:'Rajdhani',sans-serif;font-size:0.95rem;font-weight:700;letter-spacing:2px;">CHAT WHATSAPP</div><div style="font-size:0.7rem;opacity:0.8;">Respon cepat ‚Ä¢ 24 Jam</div></div>
        </a>
      </div>
    </div>
  </div>
</div>

<footer>¬© 2025 SHINE STORE ‚Äî Top Up BBC & APK Premium ‚Ä¢ Semua transaksi via WhatsApp</footer>

<script>
// ============================================================
// CONFIG ‚Äî GANTI DI SINI
// ============================================================
const WA_NUMBER = '62895619811574';
const ADMIN_PASS = '875421';
const SOLD_KEY = 'shinestore_sold';
const APK_KEY = 'shinestore_apk';

// ============================================================
// BBC PACKAGES
// ============================================================
const BBC_PACKAGES = [
  {bbc:5000,price:19000},
  {bbc:10000,price:38000},
  {bbc:15000,price:57000},
  {bbc:20000,price:76000},
  {bbc:25000,price:95000,popular:true},
  {bbc:30000,price:114000},
  {bbc:35000,price:133000},
  {bbc:40000,price:152000},
  {bbc:45000,price:171000},
  {bbc:50000,price:190000},
];

// ============================================================
// APK DEFAULT DATA
// ============================================================
const APK_DEFAULT = [
  {name:'CapCut',emoji:'üé¨',plans:[{dur:'7 Hari',price:1200},{dur:'14 Hari',price:1500},{dur:'21 Hari',price:1800},{dur:'28 Hari',price:2200},{dur:'35 Hari',price:2900},{dur:'42 Hari',price:3500}]},
  {name:'Canva',emoji:'üé®',plans:[{dur:'1 Bulan',price:12000},{dur:'1 Tahun',price:108000},{dur:'Lifetime',price:118000}]},
  {name:'iQIYI',emoji:'üé¨',plans:[{dur:'Standar 1 Bulan',price:3000},{dur:'Standar 1 Tahun',price:7000}]},
  {name:'Vidio',emoji:'üì∫',plans:[{dur:'Mobile Sharing 1 Bln',price:13300},{dur:'Mobile Private 1 Bln',price:21200},{dur:'All Device Sharing 1 Bln',price:19800}]},
  {name:'Spotify',emoji:'üéµ',plans:[{dur:'Individual',price:8000},{dur:'Individual No Garansi',price:800}]},
  {name:'Netflix',emoji:'üé¨',plans:[
    {dur:'1P 1U 1 Hari',price:2555},
    {dur:'1P 1U 1 Bulan',price:13000},
    {dur:'1P 2U 1 Bulan',price:10800},
    {dur:'Semi 1 Bulan',price:15500},
    {dur:'1P 1U 7 Hari',price:8800},
    {dur:'1P 2U 7 Hari',price:8000},
    {dur:'Semi 7 Hari',price:9800},
  ]},
  {name:'Alight Motion',emoji:'‚ú®',plans:[
    {dur:'1 Tahun',price:1000},
  ]},
];

// ============================================================
// HELPERS
// ============================================================
const fmt = n => 'Rp ' + n.toLocaleString('id-ID');
const getSold = () => { try{return JSON.parse(localStorage.getItem(SOLD_KEY))||{};}catch(e){return {};} };
const saveSold = d => localStorage.setItem(SOLD_KEY, JSON.stringify(d));
const getApkData = () => { try{const r=localStorage.getItem(APK_KEY);return r?JSON.parse(r):APK_DEFAULT;}catch(e){return APK_DEFAULT;} };
const saveApkData = d => localStorage.setItem(APK_KEY, JSON.stringify(d));

let isAdmin=false, selBbc=null, selApk=null, curApkIdx=0;

// ============================================================
// MODAL
// ============================================================
function openModal(id){ document.getElementById(id).classList.add('open'); }
function closeModal(id){ document.getElementById(id).classList.remove('open'); }

// ============================================================
// NAVIGATION
// ============================================================
function switchPage(page) {
  document.getElementById('pageBbc').classList.toggle('active', page==='bbc');
  document.getElementById('pageApk').classList.toggle('active', page==='apk');
  document.getElementById('navBbc').className = 'nav-btn' + (page==='bbc'?' active-bbc':'');
  document.getElementById('navApk').className = 'nav-btn' + (page==='apk'?' active-apk':'');
  if(page==='apk') initApk();
}

// ============================================================
// ADMIN
// ============================================================
function doLogin() {
  if(document.getElementById('passInput').value === ADMIN_PASS) {
    closeModal('modalLogin');
    document.getElementById('passInput').value='';
    document.getElementById('loginErr').style.display='none';
    isAdmin=true;
    document.getElementById('adminBar').style.display='flex';
    renderBbc(); renderApkGrid();
    showToast('Mode Admin Aktif üîß');
  } else {
    document.getElementById('loginErr').style.display='block';
    document.getElementById('passInput').value='';
  }
}

function exitAdmin() {
  isAdmin=false;
  document.getElementById('adminBar').style.display='none';
  renderBbc(); renderApkGrid();
  showToast('Keluar dari Admin');
}

// ============================================================
// BBC
// ============================================================
function renderBbc() {
  const grid=document.getElementById('bbcGrid');
  grid.innerHTML='';
  const sold=getSold();
  BBC_PACKAGES.forEach((pkg,i) => {
    const key='bbc_'+pkg.bbc;
    const isSold=!!sold[key];
    const div=document.createElement('div');
    div.className='pkg'+(pkg.popular?' popular':'')+(isSold?' sold-out':'')+(isAdmin?' admin-mode':'');
    div.innerHTML=`<div class="pkg-num">${pkg.bbc.toLocaleString('id-ID')}</div><div class="pkg-label">üíé BBC</div><div class="pkg-price">${fmt(pkg.price)}</div>`;
    div.onclick=()=>{ if(isAdmin){toggleSold(key);return;} if(!isSold) selectBbc(i,div); };
    grid.appendChild(div);
  });
}

function selectBbc(i,el) {
  document.querySelectorAll('#bbcGrid .pkg').forEach(p=>p.classList.remove('selected'));
  el.classList.add('selected');
  selBbc=BBC_PACKAGES[i];
  updateBbcSummary();
}

function updateBbcSummary() {
  if(!selBbc) return;
  document.getElementById('bbcSummary').classList.add('show');
  document.getElementById('sPackage').textContent=selBbc.bbc.toLocaleString('id-ID')+' BBC';
  document.getElementById('sUid').textContent=document.getElementById('userId').value||'‚Äî';
  document.getElementById('sZone').textContent=document.getElementById('zoneId').value||'‚Äî';
  document.getElementById('sPrice').textContent=fmt(selBbc.price);
}

function sendBbcOrder() {
  if(!selBbc){alert('‚ö†Ô∏è Pilih paket BBC dulu!');return;}
  const uid=document.getElementById('userId').value.trim();
  const zone=document.getElementById('zoneId').value.trim();
  const wa=document.getElementById('waNumBbc').value.trim();
  if(!uid){alert('‚ö†Ô∏è Masukkan User ID!');return;}
  if(!zone){alert('‚ö†Ô∏è Masukkan Zone ID!');return;}
  if(!wa){alert('‚ö†Ô∏è Masukkan nomor WhatsApp!');return;}
  const msg=`Halo Shine Store! üëã\n\nSaya ingin top up Mobile Legends:\n\nüíé *Paket:* ${selBbc.bbc.toLocaleString('id-ID')} BBC\nüí∞ *Harga:* ${fmt(selBbc.price)}\nüÜî *User ID:* ${uid}\nüåê *Zone ID:* ${zone}\nüì± *No. WA saya:* ${wa}\n\nMohon dikonfirmasi. Terima kasih!`;
  window.open(`https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`,'_blank');
}

// ============================================================
// APK
// ============================================================
function initApk() {
  const data=getApkData();
  const tabs=document.getElementById('apkTabs');
  tabs.innerHTML='';
  if(!data.length){document.getElementById('apkGrid').innerHTML='<p style="color:var(--text-dim)">Belum ada APK.</p>';return;}
  data.forEach((app,i)=>{
    const btn=document.createElement('button');
    btn.className='apk-tab'+(i===0?' active':'');
    btn.textContent=app.emoji+' '+app.name;
    btn.onclick=()=>{
      curApkIdx=i;
      document.querySelectorAll('.apk-tab').forEach(t=>t.classList.remove('active'));
      btn.classList.add('active');
      selApk=null;
      document.getElementById('apkSummary').classList.remove('show');
      document.getElementById('btnApkOrder').style.display='none';
      renderApkGrid();
    };
    tabs.appendChild(btn);
  });
  curApkIdx=0;
  renderApkGrid();
}

function renderApkGrid() {
  const grid=document.getElementById('apkGrid');
  grid.innerHTML='';
  const data=getApkData();
  const app=data[curApkIdx];
  if(!app) return;
  const sold=getSold();
  app.plans.forEach((plan,i)=>{
    const key='apk_'+app.name+'_'+i;
    const isSold=!!sold[key];
    const div=document.createElement('div');
    div.className='pkg'+(isSold?' sold-out':'')+(isAdmin?' admin-mode':'');
    div.innerHTML=`<div class="pkg-num" style="font-size:1rem;">${app.emoji}</div><div class="pkg-label purple">${plan.dur}</div><div class="pkg-price">${fmt(plan.price)}</div>`;
    div.onclick=()=>{ if(isAdmin){toggleSold(key);return;} if(!isSold) selectApkPlan(app,plan,div); };
    grid.appendChild(div);
  });
}

function selectApkPlan(app,plan,el) {
  document.querySelectorAll('#apkGrid .pkg').forEach(p=>p.classList.remove('selected'));
  el.classList.add('selected');
  selApk={app:app.name,dur:plan.dur,price:plan.price};
  document.getElementById('apkSummary').classList.add('show');
  document.getElementById('btnApkOrder').style.display='block';
  document.getElementById('sApkName').textContent=app.name;
  document.getElementById('sApkDur').textContent=plan.dur;
  document.getElementById('sApkPrice').textContent=fmt(plan.price);
}

function sendApkOrder() {
  if(!selApk){alert('Pilih paket APK dulu!');return;}
  const wa=document.getElementById('waNumApk').value.trim();
  if(!wa){alert('Masukkan nomor WhatsApp!');return;}
  const msg=`Halo Shine Store! üëã\n\nSaya ingin beli APK Premium:\n\nüì± *Aplikasi:* ${selApk.app} Premium\nüìÖ *Durasi:* ${selApk.dur}\nüí∞ *Harga:* ${fmt(selApk.price)}\nüì± *No. WA saya:* ${wa}\n\nMohon dikonfirmasi. Terima kasih!`;
  window.open(`https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(msg)}`,'_blank');
}

// ============================================================
// SOLD OUT
// ============================================================
function toggleSold(key) {
  const sold=getSold();
  if(sold[key]) delete sold[key]; else sold[key]=true;
  saveSold(sold);
  renderBbc(); renderApkGrid();
  showToast(sold[key]?'Ditandai Sold Out!':'Sold Out dilepas!');
}

// ============================================================
// ADMIN APK MANAGE
// ============================================================
function openManageApk() {
  renderManageList();
  openModal('modalApk');
}

function renderManageList() {
  const data=getApkData();
  const list=document.getElementById('apkManageList');
  if(!data.length){list.innerHTML='<p style="color:var(--text-dim);text-align:center;padding:16px;">Belum ada APK.</p>';return;}
  list.innerHTML=data.map((app,ai)=>`
    <div class="apk-manage-item">
      <div class="apk-manage-header">
        <div class="apk-manage-name">
          <input class="min-input" style="width:44px;text-align:center;font-size:1.1rem;" value="${app.emoji}" maxlength="4" onchange="updateApp(${ai},'emoji',this.value)">
          <input class="min-input" style="width:150px;" value="${app.name}" onchange="updateApp(${ai},'name',this.value)">
        </div>
        <div class="apk-manage-actions">
          <button class="btn-sm-g" onclick="addPlan(${ai})">+ PAKET</button>
          <button class="btn-sm-r" onclick="deleteApp(${ai})">üóë HAPUS</button>
        </div>
      </div>
      ${app.plans.length?`<div style="font-size:0.65rem;letter-spacing:2px;color:var(--text-dim);margin-bottom:6px;text-transform:uppercase;">Durasi ‚Äî Harga (Rp)</div>`:''}
      ${app.plans.map((plan,pi)=>`
        <div class="plan-row">
          <input class="min-input" style="width:100%;" value="${plan.dur}" onchange="updatePlan(${ai},${pi},'dur',this.value)">
          <input class="min-input" type="number" style="width:100%;" value="${plan.price}" onchange="updatePlan(${ai},${pi},'price',this.value)">
          <button class="btn-sm-r" onclick="deletePlan(${ai},${pi})">üóë</button>
        </div>
      `).join('')}
    </div>
  `).join('');
}

function adminAddApp() {
  const name=document.getElementById('newAppName').value.trim();
  const emoji=document.getElementById('newAppEmoji').value.trim()||'üì±';
  if(!name){showToast('Nama wajib diisi!');return;}
  const data=getApkData();
  data.push({name,emoji,plans:[]});
  saveApkData(data);
  renderManageList(); initApk();
  document.getElementById('newAppName').value='';
  document.getElementById('newAppEmoji').value='';
  showToast('Aplikasi ditambahkan! ‚úÖ');
}

function updateApp(ai,field,val) {
  const data=getApkData(); data[ai][field]=val; saveApkData(data); initApk(); showToast('Tersimpan ‚úì');
}

function deleteApp(ai) {
  if(!confirm('Hapus aplikasi ini?')) return;
  const data=getApkData(); data.splice(ai,1); saveApkData(data); renderManageList(); initApk(); showToast('Dihapus!');
}

function addPlan(ai) {
  const data=getApkData(); data[ai].plans.push({dur:'Durasi Baru',price:0}); saveApkData(data); renderManageList(); initApk();
}

function updatePlan(ai,pi,field,val) {
  const data=getApkData(); data[ai].plans[pi][field]=field==='price'?parseInt(val)||0:val; saveApkData(data); initApk(); showToast('Tersimpan ‚úì');
}

function deletePlan(ai,pi) {
  const data=getApkData(); data[ai].plans.splice(pi,1); saveApkData(data); renderManageList(); initApk(); showToast('Paket dihapus!');
}

// ============================================================
// TOAST
// ============================================================
let toastTimer;
function showToast(msg) {
  const t=document.getElementById('toast');
  t.textContent=msg; t.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer=setTimeout(()=>t.classList.remove('show'),2200);
}

// ============================================================
// INIT
// ============================================================
renderBbc();
initApk();
</script>
</body>
</html>
